# Maintainer: Peter Jung <admin@ptr1337.dev>
# Maintainer: Vladislav Nepogodin (vnepogodin) <vnepogodin@cachyos.org>

pkgname=cachyos-handheld
pkgver=1.3.1
pkgrel=1
arch=('any')
license=('GPL-3.0-later')
pkgdesc='CachyOS - Handheld!'
url='https://github.com/CachyOS/CachyOS-Handheld'
source=("git+$url?signed#tag=$pkgver")
install="$pkgname.install"
options=(!strip !debug)
provides=('cachyos-deckify')
replaces=('cachyos-deckify')
sha256sums=('3d948e603eca9de64d8bbf26d7e66dd3fcf0c93178c6e31d121e0a9db2f52819')
validpgpkeys=(
  E8B9AA39F054E30E8290D492C3C4820857F654FE  # Peter Jung <admin@ptr1337.dev>
  B1B70BB1CD56047DEF31DE2EB62C3D10C54D5DA9  # Vladislav Nepogodin <nepogodin.vlad@gmail.com>
  E18447AC260021D31F3FF6C4C8A2A4774B8B63C4  # Eric Naim <dnaim@cachyos.org>
)
makedepends=('git')
depends=(
  'cachyos-alacritty-config'
  'cachyos-vapor'
  'gamescope-session-cachyos'
  'jupiter-hw-support'
  'lib32-gamescope'
  'mangohud'
  'mesa-utils'
  'plasma-login-manager'
  'scx-scheds'
  'steam'
)

package() {
  install -d "$pkgdir/etc"
  cp -rf "${srcdir}/CachyOS-Handheld/etc" "$pkgdir"
  install -d "$pkgdir/usr"
  cp -rf "${srcdir}/CachyOS-Handheld/usr" "$pkgdir"

  install -d "$pkgdir/usr/lib/firmware/ath11k"
  ln -s ./QCA2066 "$pkgdir/usr/lib/firmware/ath11k/QCA206X"
}
